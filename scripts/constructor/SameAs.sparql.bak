PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>

CONSTRUCT {
    GRAPH ?g1 {
         ?s1 owl:sameAs ?s2 .
     }
} WHERE { 
  GRAPH ?g1 {?s1 ?p1 ?o1} .
  GRAPH ?g2 {?s2 ?p2 ?o2} .

  ?s1 <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?type .
  ?s2 <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?type .
  
  BIND(STR(REPLACE(STR(?s1),"http://example.org/s[0-9]+/.*_", "")) AS ?s1_id) .
  BIND(STR(REPLACE(STR(?s2),"http://example.org/s[0-9]+/.*_", "")) AS ?s2_id) .
  
  FILTER (strstarts(str(?g1), 'http://example.org/'))
  FILTER (strstarts(str(?g2), 'http://example.org/'))
  
  FILTER (?g1 != ?g2 && ?s1_id = ?s2_id)
} 